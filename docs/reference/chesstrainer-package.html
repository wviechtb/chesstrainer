<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light"><script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/3/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>chesstrainer: Create and Test Yourself on Chess Lines — chesstrainer-package • chesstrainer</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="chesstrainer: Create and Test Yourself on Chess Lines — chesstrainer-package"><meta property="og:description" content="

The main purpose of the chesstrainer package is to create sequences of moves (lines), save them, and then test yourself on these sequences. This is especially useful for training openings, but can also be used for creating chess puzzles or training tactics."><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@wviechtb"><meta name="twitter:site" content="@wviechtb"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/3/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/3/darkly/bootstrap.css" media="(prefers-color-scheme: dark)"><!-- preferably CSS --><link rel="stylesheet" href="../preferably.css"><link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)"><script src="../darkswitch.js"></script></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">chesstrainer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9-134</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>

  </a>
</li>
<li>
  <a href="../reference/chesstrainer-package.html">Manual</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
          <a href="#" id="css-toggle-btn">
            <span class="fas fa-adjust fa-lg"></span>
          </a>
        </li>

        <li>
  <a href="https://scholar.social/@wviechtb" class="external-link">Mastodon</a>
</li>
<li>
  <a href="https://github.com/wviechtb/chesstrainer" class="external-link">GitHub</a>
</li>




      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>chesstrainer: Create and Test Yourself on Chess Lines</h1>

    <div class="hidden name"><code>chesstrainer-package.Rd</code></div>
    </div>

    <div class="ref-description">


<p>The main purpose of the <span class="pkg">chesstrainer</span> package is to create sequences of moves (lines), save them, and then test yourself on these sequences. This is especially useful for training openings, but can also be used for creating chess puzzles or training tactics.</p>
    </div>


    <div id="starting-the-trainer">
    <h2>Starting the Trainer</h2>


<p>To start the trainer, run <code><a href="play.html">play()</a></code> from the console. When starting the trainer for the first time, a directory is created for storing settings and a directory where sequences will be stored. A few example sequences also come with the package and you will receive a prompt whether to copy these sequences to the sequence directory. To familiarize yourself with the trainer, it would be good to do so.</p>
<p>You will then receive a prompt to enter a player name. Choose a name and press enter.</p>
<p>The trainer then starts in <em>add mode</em> (see the ‘Note’ section at the bottom if you receive an error that the graphics device does not support event handling). For now, click on the window showing the chess board and press <code>&lt;space&gt;</code> (i.e., the space bar), which will switch to the <em>test mode</em> (note: in this manual, key presses are indicated as: <code>&lt;key&gt;</code>). One of the existing sequences will then be chosen at random. The trainer may immediately prompt you to play a certain opening (via a comment at the top of the window), it may make some moves for you, or it may start at a later position during a game. Either way, you will then have to make the correct move based on the position. You do this by either left-clicking and dragging the piece to be played from its current position to the desired target square or by left-clicking on the piece to be moved and then left-clicking on the target square.</p>
<p>If the line width of the green rectangles (that show up when moving a piece) is too narrow or too thick, you can use the <code>&lt;(&gt;</code> and <code>&lt;)&gt;</code> keys to decrease/increase the line width. Adjust this value such that the rectangles are clearly visible, but do not overlap into adjacent squares. If the text on the bottom or other visual elements are getting cut off, you can use the <code>&lt;{&gt;</code> and <code>&lt;}&gt;</code> keys to decrease/increase the margin width.</p>
<p>The trainer will then make the next move, after which you will then again have to make the correct move. This will continue until the end of the sequence. If you do not know what the correct move is, the <code>&lt;h&gt;</code> key will provide a hint showing which piece to move. Pressing <code>&lt;h&gt;</code> for a second time will show the target square. Once the sequence has ended, left-clicking starts a new sequence.</p>
<p>In <em>test mode</em>, information is shown at the bottom about the current mode, the name of the current sequence, the player name, the current move number and the total number of moves of the sequence, the number of rounds (how many times the sequence has been played so far), the age of the sequence (how many days ago the sequence was last played), the estimated difficulty of the sequence (see below), and the sequence score (see below). With <code>&lt;z&gt;</code>, you can toggle on ‘zen mode’ to hide this information.</p>
<p>With <code>&lt;F1&gt;</code>, you can obtain an overview of all keyboard shortcuts. The <code>&lt;left&gt;</code> and <code>&lt;right&gt;</code> arrow keys toggle between the two help pages. The <code>&lt;t&gt;</code> key prints this manual in text format to the console. The <code>&lt;m&gt;</code> key opens up the manual online. The <code>&lt;F1&gt;</code> or <code>&lt;escape&gt;</code> key close the help overlay.</p>
<p>You can quit the trainer with the <code>&lt;q&gt;</code> key.</p>
    </div>
    <div id="the-sequence-score">
    <h2>The Sequence Score</h2>


<p>The trainer keeps track of a score for each sequence. For a new sequence, the score starts out at 100 points. The score is multiplied by 0.8 after completing a sequence without any mistakes. When making a wrong move when playing a sequence, the score is increased by 40 points (up to a maximum of 100). You can use the <code>&lt;t&gt;</code> key to take back the score adjustment (but you should only do this when making the wrong move accidentally). Receiving a hint with the <code>&lt;h&gt;</code> key increases the score by 20 points (40 points when asking for both the starting and the target square, so this is equivalent to making a mistake).</p>
<p>The trainer uses the score to choose the next sequence. Sequences with higher scores have a higher chance to be presented. The probability of playing a particular sequence is computed with \(p_i = s_i^e / \sum s_i^e\), where \(s_i\) is the score of the \(i\)th sequence and \(e\) is the ‘exponent value’. This is set to 2 by default and enhances the probability that sequences with higher scores are more likely to be played. The exponent value can be adjusted with the <code>&lt;^&gt;</code> (or <code>&lt;6&gt;</code>) key. Setting the exponent value to 0 makes all sequences equally likely to be played. Setting it to a large value (e.g., 10) makes it very likely that the sequence with the highest score is played next. The score for the current sequence can also be set manually with the <code>&lt;o&gt;</code> key. Setting the score to 0 means that the sequence has a zero probability of being presented.</p>
<p>After completing a sequence, the current score for the sequence is saved (together with the number of times that the sequence has been played and when it was last played) to the sequence file. This way, your progress in learning the sequence is saved permanently across sessions. Using the <code>&lt;g&gt;</code> key, a progress graph (showing the sequence scores over consecutive rounds) for the current sequence can be shown (if the sequence has been played before). This is useful to check whether progress is being made in learning the sequence. You can zoom into the graph by left-clicking twice (once for the start and once for the end of the interval). This can be repeated to zoom in further. Clicking the right mouse button zooms all the way out. Clicking outside of the graph, right-clicking anywhere when zoomed out, or the <code>&lt;escape&gt;</code> key closes the graph.</p>
<p>Using the <code>&lt;G&gt;</code> key, you can toggle whether the progress graph will be automatically shown at the end of each completed sequence.</p>
<p>With <code>&lt;F11&gt;</code> (or <code>&lt;Ctrl-1&gt;</code>), you can obtain a plot of the average score of all sequences (in the current sequence directory; see below) as a function of each completed sequence during the current session. The horizontal dotted line corresponds to the average score at the beginning of the session. This is useful to check whether progress is being made in learning all of the sequences.</p>
    </div>
    <div id="managing-and-selecting-sequences">
    <h2>Managing and Selecting Sequences</h2>


<p>Using the <code>&lt;l&gt;</code> key, you can obtain a list of all sequences, together with their current score, the number of rounds (how times they have been played so far), their age (in days; <code>NA</code> if a sequence has not been played before), the estimated difficulty of the sequence (<code>NA</code> if this cannot be computed yet), and the current play probability (with 0 to 5 asterisks next to it based on the probability). Note that this is shown in the console, so ideally you should place the window with the chess board and the console window next to each other.</p>
<p>In <em>test mode</em>, you can use <code>&lt;Ctrl-d&gt;</code> to delete the current sequence. Note that this is permanent and all progress information about the sequence will be lost. You will receive a prompt to confirm the deletion.</p>
<p>With <code>&lt;/&gt;</code> (or <code>&lt;,&gt;</code>), you can select a subset of the sequences in various ways by entering:</p>
<p></p><ul><li><p>a text string (which is applied as a regular expression to the filenames of the sequences),</p></li>
<li><p>a sequence number (e.g., <code>2</code> to select the 2nd sequence),</p></li>
<li><p>a sequence number range (e.g., <code>2-5</code> to select sequences 2 to 5),</p></li>
<li><p>something like <code>score &gt; 80</code> to select sequences with a score above a certain threshold,</p></li>
<li><p>something like <code>rounds &lt; 1</code> to select sequences that have been played less than a certain number of times,</p></li>
<li><p>something like <code>age &gt; 2</code> to select sequences that have been played more than a certain number of days ago,</p></li>
<li><p>something like <code>difficulty &gt; 20</code> to select sequences with a difficulty above a certain threshold,</p></li>
<li><p>a <a href="https://en.wikipedia.org/wiki/Forsyth-Edwards_Notation" class="external-link">FEN</a> to select all sequences that contain a position matching the FEN,</p></li>
<li><p><code>c:</code> followed by a (case insensitive) text string to select all sequences where a comment contains the text string.</p></li>
</ul><p>The keywords <code>score</code>, <code>rounds</code>, <code>age</code>, and <code>difficulty</code> can be abbreviated to <code>s</code>, <code>r</code>, <code>a</code>, and <code>d</code> (so <code>s &gt; 80</code>, <code>r &lt; 1</code>, <code>a &gt; 2</code>, and <code>d &gt; 20</code> would also work). Other comparators such as <code>&gt;=</code>, <code>&lt;</code>, and <code>&gt;=</code> can also be used (e.g., <code>s &lt;= 10</code>). When entering a text string, you can refine your search by prefixing the string with either ‘<code>&amp; </code>’ or ‘<code>| </code>’, that is, ‘<code>&amp; &lt;text string&gt;</code>’ searches for the intersection of the currently selected sequences and those matching the new text string while ‘<code>| &lt;text string&gt;</code>’ searches for their union.</p>
<p>Just pressing <code>&lt;enter&gt;</code> at the prompt (i.e., not entering any search string) keeps the current selection. Entering <code>*</code> at the prompt selects all sequences. The <code>&lt;*&gt;</code> (or <code>&lt;8&gt;</code>) key also selects all sequences without using <code>&lt;/&gt;</code> first. If you only want to search for sequences (without selecting them), you can use the <code>&lt;|&gt;</code> key (instead of <code>&lt;/&gt;</code>).</p>
<p>In <em>test mode</em>, sequences are played by default at random based on the score as described above. However, you can toggle into a different sequence selection mode with the <code>&lt;m&gt;</code> key. Selection can be based on:</p>
<p></p><ol><li><p>the score, where sequences with higher scores have a higher play probability (the default),</p></li>
<li><p>the score, where the sequence with the highest score is played next,</p></li>
<li><p>the number of rounds, where sequences with a lower number of rounds have a higher play probability,</p></li>
<li><p>the number of rounds, where the sequence with the lowest number of rounds is played next,</p></li>
<li><p>the age, where sequences that were last played longer ago have a higher play probability,</p></li>
<li><p>the age, where the sequence that was last played the longest ago is played next,</p></li>
<li><p>the difficulty, where more difficult sequences have a higher play probability,</p></li>
<li><p>the difficulty, where the sequence with the highest difficulty is played next.</p></li>
</ol><p>The exponent value affects selection modes 1, 3, 5, and 7. Setting the exponent value to a large value makes mode 1 essentially the same as mode 2 (and similarly, mode 3 like mode 4, mode 5 like mode 6, and mode 7 like mode 8). For modes 2, 4, 6, and 8, if the highest score, lowest number of rounds, highest age, or highest difficulty is the same for multiple sequences, the alphabetically first one is played next. For modes 5 and 6, sequences that have never been played before are given the highest priority. For all modes, sequences whose score was set to 0 are never played.</p>
<p>One can also choose to play sequences sequentially, either ordered alphabetically, ordered by their length (which is given by the number of moves that have to be made by the player), or ordered by their moves. The latter is especially useful when practicing a particular opening and you wants to go through a set of corresponding sequences in the order of the variations.</p>
<p>For the sequential selection modes and for selection mode 6 (i.e., where the oldest sequence is always played next), a message is shown after completing one round of all (selected) sequences (as long as more than one sequence is selected). For selection modes 1 and 2, you can also set a ‘target score’ with the <code>&lt;s&gt;</code> key (the default value is 0, which has no effect). Once all (selected) sequences have a score below this target score, a message will be shown.</p>
<p>In <em>test mode</em>, the <code>&lt;r&gt;</code> key repeats the last played sequence. At the end of a sequence, you can also use the middle mouse button to repeat the sequence (before a new sequence is started). With <code>&lt;R&gt;</code>, you can toggle whether a sequence will be automatically repeated if a mistake was made while playing the sequence.</p>
    </div>
    <div id="timed-mode">
    <h2>Timed Mode</h2>


<p>With the <code>&lt;x&gt;</code> key, you can switch into a <em>timed mode</em>. In this mode, all moves played during a sequence must be completed in a certain amount of time, which is given by the total number of moves that must be played in the sequence times the current setting for ‘time per move’ (which is 5 seconds by default). For example, if 8 moves must be played, then you have \(8 \times 5 = 40\) seconds in total to complete all moves (the time taken by the trainer for playing moves is not counted). Not completing the moves within this amount of time is treated like a mistake (i.e., the score is increased by 40 points).</p>
<p>When playing a sequence in this mode, the bar to the right of the board indicates whether the current playing time is above (in green) or below (in red) the amount of time you should have spent on the moves so far (i.e., if every move took exactly the amount of time allowed by the ‘time per move’ setting).</p>
<p>The ‘time per move’ value can be adjusted via <code>&lt;F6&gt;</code>.</p>
    </div>
    <div id="sequence-difficulty">
    <h2>Sequence Difficulty</h2>


<p>After playing a sequence multiple times, the difficulty of the sequence can be estimated based on past performance. By default, this is computed as the average score increase (ASI) over the plays of the sequence. Using <code>&lt;d&gt;</code>, you can bring up a menu to choose from a variety of different methods for estimating the difficulty, including:</p>
<p></p><ol><li><p>the average score increase over the plays of the sequence (ASI),</p></li>
<li><p>the percentage of plays where the score did not improve (PNI),</p></li>
<li><p>the number of plays where the score did not improve (NNI),</p></li>
<li><p>the percentage of plays with a change in the score trend (PCT),</p></li>
<li><p>the average of the scores of the sequence (AVG),</p></li>
<li><p>the standard deviation of the scores of the sequence (SD),</p></li>
<li><p>the root mean square successive difference (RMSSD),</p></li>
<li><p>the decay parameter from an exponential regression model (ERM).</p></li>
</ol><p>These different calculations methods reflect the difficulty of a sequence in various ways. Sequences with high values for the ASI, PNI, NNI, PCT, SD, and RMSSD tend to show larger fluctuations in their scores over time and are apparently difficult to remember. Sequences with high AVG values are also difficult. Sequences with high ERM values are deviating strongly from the optimal decrease in the score that should happen when never making mistakes while playing a sequence (i.e., \(100\), \(100 \times 0.8 = 80\), \(80 \times 0.8 = 64\), and so on). By default, only the 15 most recent scores are used in the calculation of these statistics. Also, by default the difficulty is only computed when a sequence has been played at least 5 times. These values can also be adjusted via the menu that comes up when pressing the <code>&lt;d&gt;</code> key.</p>
    </div>
    <div id="adding-new-sequences">
    <h2>Adding New Sequences</h2>


<p>As described above, the trainer comes with a few example sequences to teach you how it can be used, but serious use of the trainer requires that you add your own sequences. With <code>&lt;space&gt;</code>, you can switch into the <em>add mode</em>, where you can enter new sequences. The first thing to decide is whether the player should play with white or black. With the <code>&lt;f&gt;</code> key, the board can be flipped accordingly (the player always plays with the pieces shown at the bottom). Next, you need to decide whether some moves will be automatically played at the beginning of a sequence. If some moves should be played automatically, then simply make these moves on the board. Once you arrive at the position where a player should start making moves, press <code>&lt;z&gt;</code> (note that ‘Show’ at the bottom left then turns from ‘Yes’ to ‘No’). Now continue playing the line as it should be played. If you make a mistake when playing a move, use the <code>&lt;t&gt;</code> key to take the move back. Once the sequence is complete, use the <code>&lt;s&gt;</code> key to save the sequence. You will be prompted for a filename. Once the sequence has been saved, it will automatically become part of the sequences that may be presented in <em>test mode</em>.</p>
<p>A sequence may also start immediately in the starting position. Here, you will press <code>&lt;z&gt;</code> right at the beginning. Since it is then essentially impossible for a player to know what they should play (since there are many sensible moves one could make), you will have to instruct the player what they should do. Using the <code>&lt;c&gt;</code> key, you can add a comment to the current move which will be shown to the player (before they have to make the move). For example, you could tell the player to play the Spanish (Ruy Lopez) opening. You should then make the appropriate moves on the board.</p>
<p>Comments can be added to any move using the <code>&lt;c&gt;</code> key. These will be shown before the move is played. This may be useful if one could venture into multiple sensible lines in a given position. You would then have to instruct the player to make a particular move (either by telling the player directly which move to make or giving some appropriate hint, such as the name of a particular line/variation). Comments can also be used to mention variation names or other useful information.</p>
<p>If a sequence should commence not at the starting position of a chess game, but later on, you can move the pieces into the desired position and then use the <code>&lt;0&gt;</code> key to make the current position the starting position for a particular sequence. Alternatively, you can use <code>&lt;b&gt;</code> to start a board editor (see below for details).</p>
<p>Occasionally, you may want to construct sequences where the player also has to make the moves of the opposing side (i.e., for the computer). The <code>&lt;Z&gt;</code> key can be used to toggle whether the computer moves will be automatically played or not (when this is toggled off, then this will also be indicated at the bottom left). For example, you could memorize entire games by pressing the <code>&lt;z&gt;</code> and <code>&lt;Z&gt;</code> keys at the very beginning and then making all moves of the game. A comment should then be added before making the first move to provide a reminder which game should be played.</p>
<p>The <code>&lt;e&gt;</code> key can be used to edit the comments for a particular sequence. This way, you can also add a ‘start comment’ and/or an ‘end comment’ to a particular sequence (the former will be shown in an overlay box before the sequence starts, the latter at the top after the last move). The <code>&lt;E&gt;</code> key opens up the <code><a href="https://rdrr.io/r/utils/edit.html" class="external-link">data editor</a></code> on the data frame that contains the moves for the current sequence. This can also be used to add, edit, and remove comments in the <code>comment</code> column or make adjustments to the other columns (but this should only be done if their meaning is clear).</p>
<p>Once a number of moves have been made for the sequence, the <code>&lt;left&gt;</code> and <code>&lt;right&gt;</code> arrow keys can be used to go back or forward one move. With the <code>&lt;1&gt;</code> or <code>&lt;up&gt;</code> arrow keys, you can jump to the first move that needs to be made by the player (i.e., the first move where ‘Show’ is set to ‘No’) or to the very beginning of the sequence if one is already at or before this position in the sequence. The <code>&lt;2&gt;</code> or <code>&lt;down&gt;</code> arrow keys jump to the very end of the sequence. The <code>&lt;3&gt;</code>, <code>&lt;4&gt;</code>, and <code>&lt;5&gt;</code> keys jump to the first quarter, middle, and third quarter of the sequence (when the sequence consists of very few moves, these different positions may not be differentiable). Note that when making a move when not looking at the very end of the sequence, then this deletes all subsequent moves that were already part of the sequence.</p>
<p>With the <code>&lt;?&gt;</code> key, you can search for sequences that start with the same moves that have been entered/played so far (this also works in <em>test mode</em>). If any matching sequences are found, a prompt will ask if they should be selected. This is useful for checking what sequences are already available based on some initial moves (and then practicing these sequences) or finding other sequences similar to the one currently being played. Alternatively, with the <code>&lt;'&gt;</code> key, you can search for sequences that include the current position anywhere in the sequence (irrespective of the particular moves that led to the position). With the <code>&lt;;&gt;</code> key, you can search for sequences that end on the current position. With the <code>&lt;:&gt;</code> key, you can search for sequences where the last-moved piece is on its current square. Note that all of these searches account for whether the board is flipped or not (i.e., only sequences are shown where the player is either moving the white or black pieces).</p>
<p>With <code>&lt;.&gt;</code>, you can select the last saved sequence (if one was saved before in the current session). This is useful for checking the sequence in <em>test mode</em> and/or creating multiple branching lines from the ending position of this sequence. Similarly, in <em>test mode</em>, the <code>&lt;a&gt;</code> key will create a copy of the current sequence, which can then be extended with additional moves and saved as a new sequence. The <code>&lt;A&gt;</code> key does the same thing, but immediately switches to <em>add mode</em> starting at the current position. At the end of a sequence, the right mouse button also switches to <em>add mode</em>.</p>
<p>In <em>add</em> or <em>test mode</em>, you can bookmark a sequence with the <code>&lt;&lt;&gt;</code> key. In <em>add mode</em>, the last saved sequence is bookmarked. In <em>test mode</em>, the currently played sequence is bookmarked. With the <code>&lt;&gt;&gt;</code> key, you can select and manage bookmarks (use <code>&lt;F1&gt;</code> while managing the bookmarks to obtain help). This is useful for creating multiple branching lines from the ending position of certain sequences or to remember sequences that you want to come back to at a later point.</p>
<p>When creating new opening sequences, the trainer tries to recognize the opening played and indicates the ECO code and opening name at the bottom right. Also, when creating new sequences, the trainer automatically recognizes move transpositions (i.e., if there are sequences with the same position that were obtained via a different move order or via different moves). If such sequences are found, their names are printed to the console. This check can be toggled on/off with the <code>&lt;T&gt;</code> key.</p>
<p>Sequences are saved to and selected from the current sequence directory. You can add, remove, and select sequence directories with <code>&lt;F8&gt;</code>. Removing a sequence directory simply removes it from being shown in the list of sequence directories (i.e., it does not delete the directory or any sequences therein). Bookmarks are specific to each sequence directory. Also, selecting a sequence directory switches to the sequence selection mode that was active when it was last selected.</p>
<p>Note that sequences are quite personalized, since they involve going into a particular line that one deems most appropriate (and hence wants to remember). Others may disagree and prefer a different line. Therefore, you should create sequences that you want to train yourself on, so you will be able to play them quickly from memory in actual games.</p>
    </div>
    <div id="the-board-editor">
    <h2>The Board Editor</h2>


<p>When in <em>add mode</em>, <code>&lt;b&gt;</code> opens up a board editor. Here, you can quickly set up a more advanced position (e.g., for a chess puzzle). With left-click and drag, pieces can be moved around. With right-click and drag, you can copy a piece that is already on the board. A right-click without a drag (or moving a piece to the left or right of the board) deletes a piece. The <code>&lt;f&gt;</code> key flips the board. The <code>&lt;n&gt;</code> key resets the board into the starting position. The <code>&lt;c&gt;</code> key clears the board. The <code>&lt;s&gt;</code> key can be used to select which side plays the first move. The <code>&lt;r&gt;</code> key can be used to enter castling availability in FEN notation (K = white can castle kingside, Q = white can castle queenside, k = black can castle kingside, q = black can castle queenside, - = neither side can castle). With the <code>&lt;o&gt;</code> key, you can enter a FEN to set up the corresponding position. With <code>&lt;F1&gt;</code>, you can receive a help overlay. You can quit the board editor with <code>&lt;q&gt;</code> or <code>&lt;escape&gt;</code>.</p>
    </div>
    <div id="managing-and-selecting-players">
    <h2>Managing and Selecting Players</h2>


<p>The trainer can be used by multiple players (i.e., sequence scores and other progress information is player specific). A player can be selected with the <code>&lt;p&gt;</code> key. You can either enter a player number, the name of an existing player, or enter a new player name. Note that player names must be syntactically valid (i.e., they should start with a letter and not contain any spaces).</p>
<p>The current player can be deleted with <code>&lt;Ctrl-r&gt;</code>. Since this deletes all progress information for this player from the sequence files (in the current sequence directory), you will receive a prompt to confirm this.</p>
<p>With <code>&lt;F2&gt;</code>, a leaderboard (based on the lowest average score) and player statistics are shown (i.e., the average score, the standard deviation of the scores, the minimum and maximum score, and the total number of rounds). The statistics are based on the currently selected sequences (or all sequences in the current sequence directory if no selection has been applied). Also, sequences whose score was manually set to 0 are not included in these statistics.</p>
<p>For each player, the trainer also keeps track of each session including the play time. With <code>&lt;F12&gt;</code> (or <code>&lt;Ctrl-2&gt;</code>), you can obtain a plot of your session history, showing the play time (in minutes) over days (multiple sessions on the same day are collapsed into a single session; sessions shorter than two minutes are not counted). The total play time across all sessions is also shown. With the <code>&lt;down&gt;/&lt;up&gt;</code> arrows (or the middle mouse button), you can toggle to a view of the number of sequences played over days. You can zoom into a particular time frame by left-clicking twice (once for the start and once for the end of the interval). This can be repeated to zoom in further. Clicking the right mouse button zooms all the way out. With the <code>&lt;right&gt;/&lt;left&gt;</code> arrows, you can toggle to a view of the history over weeks and months (these views are only available if the session history spans multiple weeks/months). Again, you can zoom into particular time frames in these views by clicking the left mouse button twice. Clicking outside of the graph, right-clicking anywhere when zoomed out, or <code>&lt;escape&gt;</code> closes the graph.</p>
    </div>
    <div id="position-evaluations-via-stockfish">
    <h2>Position Evaluations via Stockfish</h2>


<p>If Stockfish (<a href="https://stockfishchess.org" class="external-link">https://stockfishchess.org</a>) is installed, it can be used in the background to automatically obtain position evaluations when adding sequences. For this, specify the path (including the executable) to Stockfish via the <code>sfpath</code> argument of the <code><a href="play.html">play</a></code> function. If this is set correctly, then position evaluations will be automatically computed and added to a sequence in <em>add mode</em>. Evaluations are given in centipawns divided by 100, except for forced mates, which are given as \(\pm99.9\). When playing a sequence, these evaluations are then shown as an evaluation bar on the left of the board.</p>
<p>By default, evaluations are based on a search depth of 14 half-moves. Obtaining such an evaluation for a given position should be relatively quick and not add much lag when creating a sequence. In <em>add mode</em>, the <code>&lt;h&gt;</code> key shows the best move according to Stockfish in a given position. The <code>&lt;y&gt;</code> key can be used to switch on a continuous analysis mode where the best move is always automatically shown. The <code>&lt;right&gt;</code> key automatically plays the best move in a given position according to the evaluation.</p>
<p>The <code>&lt;H&gt;</code> key will run a deeper analysis (by default based on search depth of 24 half-moves) and show the best move according to Stockfish. Since this may take some time, a progress bar is shown at the top while the analysis is running.</p>
<p>With <code>&lt;F7&gt;</code>, you can adjust the Stockfish settings, including the calculation depths (for fast and deep evaluations and for the <em>play mode</em>; see below), the number of principal evaluations that will be evaluated (for fast and deep evaluations), the number of threads that Stockfish can use during its calculations (the default is 1), the hash size in MB (the default is 256), and the maximum depth of the line(s) shown at the top of the board when asking for the best move. If the pause after moving pieces in <em>add mode</em> feels too long, lower the search depth for fast evaluations (e.g., to something like 10) for increased responsiveness.</p>
<p>The <code>&lt;u&gt;</code> key updates the evaluations for all moves in a sequence by recalculating the evaluations with the current setting for a deeper analysis. Depending on the number of moves in the sequence and the search depth for deep evaluations, this can take a bit of time. After updating the evaluations, they are automatically saved to the sequence file when in <em>test mode</em>. With the <code>&lt;U&gt;</code> key, all (selected) sequences can be updated in this manner. Note that this can take a very long time.</p>
<p>Note that asking Stockfish to evaluate impossible positions (e.g., black is in check but it is white's turn to move) crashes Stockfish. This should be handled gracefully by the trainer.</p>
    </div>
    <div id="play-and-analysis-mode">
    <h2>Play and Analysis Mode</h2>


<p>If Stockfish is running, you can switch into <em>play mode</em> at any time with the <code>&lt;\&gt;</code> (or <code>&lt;ä&gt;</code>) key. This is especially useful at the end of a sequence, to continue playing further moves against the computer from the end position of a sequence (e.g., to practice holding an advantage gained during an opening sequence). In this mode, the computer chooses by default its move according to a search depth of 6 half-moves, but this can be adjusted via <code>&lt;F7&gt;</code>. Here, you can also set a limit on the play strength of Stockfish (either as a skill level between 0 and 20 or as an approximate Elo value between 1320 and 3190).</p>
<p>Using the <code>&lt;g&gt;</code> key in <em>play mode</em> shows a graph of the position evaluations for the moves played so far (this also works in <em>add mode</em>). By default, the y-axis shows the evaluation based on the centipawns (\(cp\)) divided by 100, but pressing the <code>&lt;down&gt;/&lt;up&gt;</code> arrows or the middle mouse button shows the win percentage (computed with \(50 + 50 \times (2 / (1 + \exp(-0.00368208 \times cp)) - 1)\); see here: <code>https://lichess.org/page/accuracy</code>).</p>
<p>Using <code>&lt;t&gt;</code>, you can take back the last move (i.e., the move played by the computer and your own move), so that it is again your move to play.</p>
<p>The <code>&lt;left&gt;</code>, <code>&lt;right&gt;</code>, <code>&lt;up&gt;</code>, and <code>&lt;down&gt;</code> arrows and the <code>&lt;1&gt;</code>, <code>&lt;2&gt;</code>, <code>&lt;3&gt;</code>, <code>&lt;4&gt;</code>, and <code>&lt;5&gt;</code> keys work the same as described earlier (except that <code>&lt;1&gt;</code> always jumps to the start of the game). This automatically takes you into the <em>analysis mode</em>, where you can try out variations and/or force the computer to make a different move from a given position. Before doing so, you can store the current game (i.e., sequence of moves and current position) as the main variation with the <code>&lt;0&gt;</code> key. Using the <code>&lt;9&gt;</code> key, you can jump back to the end of this main variation.</p>
<p>Once in <em>play mode</em>, the <code>&lt;\&gt;</code> (or <code>&lt;ä&gt;</code>) key toggles between the analysis and the play mode. On the other hand, <code>&lt;space&gt;</code> takes you back to the mode that was active before the <em>play mode</em> was initially chosen.</p>
    </div>
    <div id="other-settings-options-and-shortcuts">
    <h2>Other Settings, Options, and Shortcuts</h2>


<p>When playing a sequence, the graphical elements shown on the playing board are created by repeatedly drawing on top of the board. Therefore, when resizing the board, all elements are redrawn, which takes a few moments. With <code>&lt;escape&gt;</code>, the board can be redrawn in its current state, after which it can be resized without having to wait for all previous graphical elements to be redrawn.</p>
<p>Clicking the right mouse button on a square adds a circle to the square. Dragging the mouse from one square to another while pressing the right mouse button draws an arrow. Those familiar with the <a href="https://lichess.org" class="external-link">https://lichess.org</a> website will recognize these visualizations. Clicking with the left mouse button on a square, <code>&lt;escape&gt;</code>, or making a move removes these visualizations. When adding a sequence, circles and arrows that are drawn are also saved and will be shown when replaying the sequence in <em>test mode</em>. When such annotations are shown as part of a move that is made by the trainer, the sequence will only proceed after a click.</p>
<p>Similarly, with the <code>&lt;!&gt;</code> and <code>&lt;@&gt;</code> (or <code>&lt;"&gt;</code>) keys, one can add (and remove) annotation glyphs (i.e., exclamation and question marks) to moves. Such annotations are also shown in <em>test mode</em>.</p>
<p>Various other settings can be adjusted while the trainer is running:</p>
<p></p><ul><li><p>By default, there is a 0.5 second sleep time between moves played by the trainer. This can be decreased/increased with the <code>&lt;-&gt;</code> and <code>&lt;+&gt;</code> keys.</p></li>
<li><p>By default, the trainer waits for a mouse click at the end of a sequence before starting a new sequence. You can toggle this on/off with the <code>&lt;w&gt;</code> key.</p></li>
<li><p>With the <code>&lt;i&gt;</code> key, the language of the trainer can be toggled between English and German (author note: I wrote this trainer in part for my chess playing kids, which is the reason why a German translation is available).</p></li>
<li><p>With the <code>&lt;v&gt;</code> key, the evaluation bar can be toggled on/off. This is mode specific (i.e., you can switch off the evaluation bar when in <em>test mode</em>, but still keep it on when in <em>add mode</em>). If evaluations are not available, the bar is not shown irrespective of whether it is toggled on or off. If the evaluation bar is turned off in <em>test mode</em>, it is still shown at the end of each sequence.</p></li>
<li><p>With the <code>&lt;C&gt;</code> key, the board coordinates can be toggled on/off.</p></li>
<li><p>With the <code>&lt;k&gt;</code> key, you can be toggle whether the material difference is shown.</p></li>
</ul><p>The settings are stored across sessions and can be shown with <code>&lt;F3&gt;</code>. With <code>&lt;F4&gt;</code>, you can adjust the colors. With <code>&lt;F5&gt;</code>, you can adjust the size of the text at the top, the text at the bottom, the size of the evaluation value in the evaluation bar (if it is shown), the size of the board coordinates, the size of the material difference, the size of plots (e.g., the progress graph), and the size of annotations glyphs.</p>
<p>With <code>&lt;F6&gt;</code>, you can adjust some miscellaneous settings, namely the multiplier for the score when completing a sequence without any mistakes (0.8 by default), the score penalty when making a wrong move (40 by default), the score penalty per hint (20 by default), the number of animation steps for the evaluation bar (5 by default), the time per move for the <em>timed mode</em> (5 seconds by default), the idle time (120 seconds by default; time without any inputs longer than this value is not counted towards the play time for the session history), and the minimum session time (60 seconds by default; sessions shorter than this are not actually saved as sessions).</p>
<p>With <code>&lt;F9&gt;</code>, the FEN of the current position is printed to the console and the position is opened on the <a href="https://lichess.org" class="external-link">https://lichess.org</a> website for analysis. With <code>&lt;Ctrl-f&gt;</code>, the FEN is printed and copied to the clipboard (this makes use of the <code><a href="http://matthewlincoln.net/clipr/reference/write_clip.html" class="external-link">write_clip</a></code> function from the <span class="pkg">clipr</span> package). With <code>&lt;Ctrl-c&gt;</code>, the current sequence name is printed and copied to the clipboard in <em>test mode</em>.</p>
<p>With <code>&lt;F10&gt;</code>, you can obtain histograms of the scores of the (selected) sequences, how many times they have been played so far (the number of rounds), how long ago they were played, their difficulty, and a scatterplot of the number of times they have been played versus their scores. In the scatterplot, the downward sloping dashed line indicates the best possible performance (i.e., never making a mistake when playing the sequence over and over) and the solid line the actual performance (as estimated based on a regression model; only shown when there are 5 or more points). If a target score value above 0 has been set (see above), this value is indicated as horizontal dotted line indicates this value (and also as a vertical dotted line in the histogram of the scores).</p>
    </div>
    <div id="playing-sounds">
    <h2>Playing Sounds</h2>


<p>The trainer plays various sounds (e.g., when playing moves, when capturing pieces, when making a wrong move, when completing a sequence). This may or may not work depending on your operating system and configuration. See the <code><a href="playsound.html">playsound</a></code> function for further details.</p>
<p>The sound volume can be decreased/increased with the <code>&lt;[&gt;</code> and <code>&lt;]&gt;</code> keys. Setting the volume to 0 disables the sound. This can also be useful if playing sounds adds too much lag.</p>
    </div>
    <div id="cleaning-up">
    <h2>Cleaning Up</h2>


<p>The package creates various files and directories. The <code><a href="cleanup.html">cleanup</a></code> function can be used to clean up files and directories created by the package.</p>
    </div>
    <div id="backing-up-sequences">
    <h2>Backing Up Sequences</h2>


<p>It is advisable to regularly make a backup of the sequences you have created. The default directory where sequences are stored can be found with the command: <code>file.path(tools::R_user_dir(package="chesstrainer", which="data"), "sequences").</code></p>
    </div>
    <div id="license-info">
    <h2>License Info</h2>


<p>The chess pieces used in the package were obtained from <code>https://commons.wikimedia.org/wiki/Category:SVG_chess_pieces</code> where they are available under the Creative Commons Attribution-Share Alike 3.0 Unported License.</p>
<p>The sound files used in the package were obtained from <code>https://github.com/lichess-org/lila/tree/master</code> where they are available under the GNU Affero General Public License.</p>
<p>The opening database was obtained from <code>https://github.com/lichess-org/chess-openings</code> where it is available under the CC0 Public Domain Dedication.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>The trainer makes extensive use of <code><a href="https://rdrr.io/r/grDevices/getGraphicsEvent.html" class="external-link">getGraphicsEvent</a></code> to capture mouse movements and keyboard inputs. Only some graphics devices support this. If you receive the error message ‘The graphics device does not support event handling’ when starting the trainer, then the current graphics device does not support this kind of interactivity. For example, this will be the case for the <code>RStudioGD</code> graphics device that is used by RStudio. You can then try running <code><a href="https://rdrr.io/r/grDevices/x11.html" class="external-link">x11()</a></code> before starting the trainer with <code><a href="play.html">play()</a></code>.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Wolfgang Viechtbauer (<a href="mailto:wvb@wvbauer.com">wvb@wvbauer.com</a>)</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Wolfgang Viechtbauer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

      </footer></div>






  </body></html>

